<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <!-- Tailwind CSS -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.16/tailwind.min.css"
      rel="stylesheet"
    />
    <link
      href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="container mx-auto mt-10">
      <h1 class="text-3xl font-bold text-center mb-8">
        Selecciona tu Plan de Mensualidad
      </h1>

      <!-- Carrusel -->
      <div class="relative">
        <div class="overflow-x-auto flex space-x-4 pb-4">
          <% mensualidades.forEach(function(mensualidad) { %>
          <div
            class="w-80 h-60 bg-white rounded-lg shadow-md flex-shrink-0 p-6 hover:bg-gray-100 transition duration-300 ease-in-out"
          >
            <h2 class="text-xl font-semibold mb-2">
              <%= mensualidad.tiempo_plan %>
            </h2>
            <p class="text-gray-700 mb-4">
              Precio: $<%= mensualidad.total_pagar %>
            </p>
            <div class="flex justify-center">
              <input
                type="radio"
                id="mensualidad_<%= mensualidad.id %>"
                name="mensualidadId"
                value="<%= mensualidad.id %>"
                class="hidden"
              />
              <label
                for="mensualidad_<%= mensualidad.id %>"
                class="cursor-pointer px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-700"
              >
                Seleccionar
              </label>
            </div>
          </div>
          <% }) %>
        </div>

        <!-- Botones de navegación -->
        <button
          class="absolute left-0 top-0 bottom-0 px-4 text-gray-600 hover:text-gray-900 focus:outline-none"
        >
          <svg
            class="w-8 h-8"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M15 19l-7-7 7-7"
            ></path>
          </svg>
        </button>

        <button
          class="absolute right-0 top-0 bottom-0 px-4 text-gray-600 hover:text-gray-900 focus:outline-none"
        >
          <svg
            class="w-8 h-8"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M9 5l7 7-7 7"
            ></path>
          </svg>
        </button>
      </div>

      <!-- Botón de envío -->
      <div class="mt-8 flex justify-center">
        <form action="/pago" method="GET">
          <input
            type="hidden"
            name="tempRegistroId"
            value="<%= tempRegistroId %>"
          />
          <input
            type="hidden"
            name="mensualidadId"
            id="mensualidadSeleccionada"
            required
          />
          <button
            type="submit"
            class="px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-500"
          >
            Proceder al Pago
          </button>
        </form>
      </div>
    </div>

    <!-- Script para actualizar el campo oculto con la selección -->
    <script>
      document
        .querySelectorAll('input[name="mensualidadId"]')
        .forEach((radio) => {
          radio.addEventListener("change", function () {
            document.getElementById("mensualidadSeleccionada").value =
              this.value;
          });
        });
    </script>

    <!-- Carrusel de navegación -->
    <script>
      const carrusel = document.querySelector(".overflow-x-auto");
      const btnPrev = document.querySelector(".left-0");
      const btnNext = document.querySelector(".right-0");

      btnPrev.addEventListener("click", () => {
        carrusel.scrollBy({
          left: -200, // Ajusta este valor según el tamaño de tus tarjetas
          behavior: "smooth",
        });
      });

      btnNext.addEventListener("click", () => {
        carrusel.scrollBy({
          left: 200, // Ajusta este valor según el tamaño de tus tarjetas
          behavior: "smooth",
        });
      });
    </script>
  </body>
</html>
