<head>
  <link
    rel="shortcut icon"
    href="https://raw.githubusercontent.com/JeanCardozo/audios/main/z.png"
  />
  <style>
    @import url("https://fonts.googleapis.com/css2?family=Lexend+Deca:wght@100..900&display=swap");
    * {
      font-family: "Lexend Deca", sans-serif;
    }

    .bg-fondo {
      background-image: url("https://raw.githubusercontent.com/JeanCardozo/audios/main/fondo.jpeg");
      background-size: cover;
      background-position: center center;
      background-repeat: no-repeat;
      background-attachment: fixed;
      min-height: 100vh;
      width: 100%;
      height: 100%;
    }
  </style>
</head>

<nav class="bg-white shadow-md">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between items-center h-16">
      <div class="flex-shrink-0 flex items-center">
        <img
          src="https://raw.githubusercontent.com/JeanCardozo/audios/main/logo.png"
          alt="Logo"
          class="h-12 w-auto"
        />
      </div>
      <div class="hidden sm:flex sm:space-x-8">
        <a
          href="/clientes/index_c"
          class="text-gray-700 hover:bg-gray-100 px-3 py-2 rounded-md text-sm font-medium"
          >Inicio</a
        >
        <a
          href="/mis_planes"
          class="text-gray-700 hover:bg-gray-100 px-3 py-2 rounded-md text-sm font-medium"
          >Mis Planes</a
        >
        <a
          href="/info_personal"
          class="text-gray-700 hover:bg-gray-100 px-3 py-2 rounded-md text-sm font-medium"
          >Información</a
        >
        <a
          href="/ayuda"
          class="text-gray-700 hover:bg-gray-100 px-3 py-2 rounded-md text-sm font-medium"
          >Ayuda</a
        >
        <a
          href="/mi_plan"
          class="text-gray-700 hover:bg-gray-100 px-3 py-2 rounded-md text-sm font-medium"
          >Mi plan de Entrenamiento</a
        >
      </div>

      <script>
        const userData = <%- JSON.stringify(userData || null) %>;
        console.log("Datos del usuario en el cliente:", userData);
      </script>
      
      <div class="relative ml-4">
        <button
          id="profileButton"
          class="flex items-center focus:outline-none"
          onclick="toggleProfileDropdown()"
        >
          <img
            src="<%= userData?.imagen_perfil %>"
            alt="Perfil"
            class="h-10 w-10 rounded-full object-cover"
            onerror="this.src='https://raw.githubusercontent.com/JeanCardozo/audios/main/acceso.png';"
          />
        </button>
        <div
          id="profileDropdown"
          class="absolute right-0 mt-2 w-40 bg-white rounded-sm shadow-md hidden text-sm"
        >
          <% if (userData) { %>
          <div class="p-2 border-b">
            <p class="font-semibold">
              Hola, <%= userData.nombre_usuario %>
            </p>
            <p class="text-gray-600"><%= userData.rol %></p>
          </div>
          <% } else { %>
          <p class="p-2 text-gray-600">Sin información</p>
          <% } %>
          <a href="/logout" class="block p-2 text-gray-700 hover:bg-gray-100"
            >Cerrar sesión</a
          >
        </div>
      </div>
        <button
          id="mobile-menu-button"
          class="sm:hidden inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500"
          aria-expanded="false"
        >
          <span class="sr-only">Abrir menú principal</span>
          <svg
            class="h-6 w-6"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
            aria-hidden="true"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M4 6h16M4 12h16M4 18h16"
            />
          </svg>
        </button>
      </div>
    </div>
  </div>
  <!-- Menú móvil -->
  <div class="sm:hidden hidden" id="mobile-menu">
    <div class="px-2 pt-2 pb-3 space-y-1">
      <a
        href="/clientes/index_c"
        class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50"
        >Inicio</a
      >
      <a
        href="/mis_planes"
        class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50"
        >Mis Planes</a
      >
      <a
        href="/info_personal"
        class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50"
        >Información</a
      >
      <a
        href="/ayuda"
        class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50"
        >Ayuda</a
      >
      <a
        href="/mi_plan"
        class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50"
        >Mi plan de Entrenamiento</a
      >
    </div>
  </div>
</nav>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const mobileMenuButton = document.getElementById("mobile-menu-button");
    const mobileMenu = document.getElementById("mobile-menu");

    mobileMenuButton.addEventListener("click", function () {
      mobileMenu.classList.toggle("hidden");
    });
  });

  function toggleProfileDropdown() {
    const dropdown = document.getElementById("profileDropdown");
    dropdown.classList.toggle("hidden");
  }
</script>

<script>
  function toggleProfileDropdown() {
    console.log("Función toggleProfileDropdown llamada");
    const dropdown = document.getElementById("profileDropdown");
    if (dropdown) {
      dropdown.classList.toggle("hidden");
    } else {
      console.error("Elemento profileDropdown no encontrado");
    }
  }
</script>
